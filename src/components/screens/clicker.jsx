import { useEffect, useState } from "react";
import ClickerNavbar from "./clickerNavbar";

function Clicker() {
  let [vote, setVote] = useState(0);
  let [energy, setEnergy] = useState(500);

  const [message, setMessage] = useState(false);
  const [position, setPosition] = useState({ top: 0, left: 0 });

  const handleClick = (event) => {
    if (energy > 0) {
      setVote((vote) => vote + 1);
      setEnergy((energy) => energy - 1);

      const { clientX, clientY } = event;
      setPosition({ top: clientY, left: clientX });
      setMessage("+1");

      setTimeout(() => {
        setMessage(null);
      }, 1000); // Убираем элемент через 2 секунды
    }
  };

  useEffect(() => {
    const interval = setInterval(() => {
      setEnergy((energy) => {
        if (energy < 500) {
          return Math.min(energy + 1, 500); // Восстанавливаем энергию на 1, не превышая 100
        }
        return energy;
      });
    }, 1000); // Восстанавливаем энергию каждую секунду

    return () => clearInterval(interval); // Очистка интервала при размонтировании компонента
  }, []);

  return (
    <div className="clicker">
      <div className="clicker-container">
        <div className="clicker-level clicker-component">
          <div className="clicker-level__left">
            <div className="clicker-level__progrssbar">
              <div className="clicker-level__progrssbar_fill"></div>
            </div>
            <div className="clicker-level__rank">
              <p>Новичок</p>
              <p>Уровень: 1/5</p>
            </div>
          </div>
          <div className="clicker-level__energy">
            <svg
              width="14"
              height="22"
              viewBox="0 0 14 22"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M3.52818 0.486865C3.57084 0.346269 3.65937 0.222844 3.78051 0.135074C3.90164 0.0473048 4.04887 -8.56915e-05 4.20014 1.16321e-07H9.79978C9.91063 8.16328e-05 10.0199 0.0256669 10.1185 0.0746495C10.2172 0.123632 10.3024 0.194612 10.3672 0.281744C10.432 0.368877 10.4745 0.469672 10.4912 0.57583C10.5079 0.681989 10.4984 0.790475 10.4633 0.892359L7.9715 8.13702H13.2996C13.4306 8.13693 13.5591 8.1725 13.6703 8.23968C13.7816 8.30685 13.8711 8.40294 13.9287 8.51699C13.9864 8.63105 14.0098 8.75849 13.9963 8.8848C13.9828 9.01111 13.933 9.13122 13.8525 9.23144L4.05315 21.437C3.95276 21.5626 3.81002 21.6501 3.64984 21.6842C3.48965 21.7183 3.3222 21.6968 3.17669 21.6235C3.03119 21.5502 2.91687 21.4297 2.8537 21.2831C2.79052 21.1365 2.7825 20.973 2.83103 20.8213L5.35227 12.8836H0.700365C0.591543 12.8837 0.484204 12.8591 0.386874 12.812C0.289545 12.7648 0.204905 12.6964 0.139677 12.612C0.0744483 12.5276 0.0304288 12.4296 0.0111137 12.3259C-0.00820132 12.2221 -0.00227987 12.1154 0.0284081 12.0143L3.52818 0.486865Z"
                fill="white"
              />
            </svg>
            <p>{energy} / 500</p>
          </div>
        </div>
        <div className="taglines">
          <h1 className="number-votes">{vote} голосов</h1>
          <h2 className="tagline">СЛЫШАТЬ. ПОМОГАТЬ. РЕШАТЬ.</h2>
        </div>
        <div
          className="clicker-icon"
          onClick={handleClick}
          disabled={energy <= 0}
        >
          {message && (
            <div
              className="fade-in"
              style={{ top: position.top, left: position.left }}
            >
              {message}
            </div>
          )}
          <svg
            width="371"
            height="371"
            viewBox="0 0 371 371"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <mask
              id="mask0_59_434"
              // style="mask-type:luminance"
              maskUnits="userSpaceOnUse"
              x="0"
              y="0"
              width="371"
              height="371"
            >
              <path d="M0 0H371V371H0V0Z" fill="white" />
            </mask>
            <g mask="url(#mask0_59_434)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M185.499 344.913C273.301 344.913 344.907 273.308 344.907 185.505C344.907 97.703 273.301 26.0975 185.499 26.0975C97.6964 26.0975 26.0909 97.703 26.0909 185.505C26.0909 273.308 97.6964 344.913 185.499 344.913Z"
                fill="#273572"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M185.499 80.6419C127.583 80.6419 80.6419 127.594 80.6419 185.499C80.6419 243.415 127.583 290.367 185.499 290.367C243.415 290.367 290.356 243.415 290.356 185.499C290.356 127.594 243.415 80.6419 185.499 80.6419ZM185.499 73.5638C247.312 73.5638 297.434 123.685 297.434 185.499C297.434 247.323 247.312 297.434 185.499 297.434C123.675 297.434 73.5638 247.323 73.5638 185.499C73.5638 123.685 123.675 73.5638 185.499 73.5638Z"
                fill="#273572"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M350.628 185.502C350.628 276.702 276.699 350.631 185.499 350.631C94.2985 350.631 20.37 276.702 20.37 185.502C20.37 94.3018 94.2985 20.3732 185.499 20.3732C276.699 20.3732 350.628 94.3018 350.628 185.502ZM185.499 361.769C282.844 361.769 361.766 282.847 361.766 185.502C361.766 88.1574 282.844 9.23511 185.499 9.23511C88.1541 9.23511 9.23181 88.1574 9.23181 185.502C9.23181 282.847 88.1541 361.769 185.499 361.769Z"
                fill="#119EDA"
              />
              <path
                d="M80.5376 161.676C81.5689 162.761 82.3613 164.346 82.8716 166.387C83.3926 168.406 83.5121 170.491 83.3167 172.705C82.8173 177.797 80.8849 181.77 77.4979 184.658C74.0566 187.545 69.8336 188.75 64.7205 188.262C59.8137 187.784 55.8838 185.895 52.9853 182.617C50.0759 179.306 48.8926 174.952 49.4137 169.525C49.8045 165.345 51.5849 161.687 53.7886 159.819L59.0863 163.695C57.5231 165.747 56.6437 167.94 56.4375 170.187C56.1769 172.846 56.8609 175.137 58.4241 177.037C59.9982 178.937 62.3539 180 65.4913 180.304C68.3898 180.587 70.865 179.881 72.9059 178.231C74.9033 176.57 76.0758 174.279 76.358 171.327C76.6077 168.71 76.0324 166.246 74.6537 163.988L80.5376 161.676ZM85.6474 157.212L55.023 145.238L62.1227 127.098L68.6797 129.649L64.3265 140.809L69.7001 142.915L73.5431 133.068L80.1109 135.63L76.2571 145.466L81.8261 147.659L86.3531 136.054L92.91 138.626L85.6474 157.212ZM107.365 118.093L87.0315 102.091L82.5589 107.79L87.0098 112.187C99.353 124.465 99.7655 129.882 93.8925 135.212L88.0737 130.436C89.0507 129.589 89.4633 128.905 89.1267 127.201C88.9205 126.321 88.432 125.344 87.6938 124.215C86.1739 121.881 82.7218 118.147 77.5326 113.414L72.6583 108.974L86.1414 91.8213L112.022 112.187L107.365 118.093ZM123.15 103.208L117.603 106.769L99.81 79.0754L106.139 75.0045L117.201 92.2111L118.395 67.1231L123.943 63.5624L141.735 91.2449L135.406 95.3158L124.344 78.0984L123.15 103.208ZM153.263 73.9276L154.805 79.8875C155.532 79.8875 156.379 79.768 157.323 79.5184C160.146 78.791 161.264 77.282 160.689 75.0566C160.189 73.146 158.67 72.5272 156.086 73.2002L153.263 73.9276ZM150.115 61.7907L151.613 67.566L154.023 66.9364C156.249 66.3502 157.106 65.0257 156.585 62.974C156.108 61.1502 154.295 60.5205 152.341 61.0199C151.928 61.1176 151.168 61.3673 150.115 61.7907ZM141.094 56.9381C144.589 55.8417 147.803 54.9189 150.669 54.1807C157.899 52.2918 162.176 54.5824 163.403 59.3155C164.217 62.4529 163.598 65.1343 161.601 67.3489L161.633 67.4466C164.467 67.7289 167.072 69.7155 168.049 73.5368C168.896 76.7718 168.386 79.4641 166.594 81.733C164.792 84.0018 162.1 85.5651 158.507 86.4987C154.273 87.5951 151.212 88.2899 149.301 88.6047L141.094 56.9381ZM193.804 39.7749C196.094 39.8075 198.059 41.2839 198.037 43.4877C198.005 45.9302 196.105 47.4283 193.717 47.3958C191.09 47.3632 189.136 45.8868 189.157 43.39C189.179 41.1428 191.209 39.7641 193.804 39.7749ZM182.948 39.6664C185.238 39.6881 187.214 41.1754 187.181 43.3791C187.16 45.8217 185.173 47.3089 182.861 47.2872C180.234 47.2547 178.269 45.7891 178.301 43.2923C178.323 41.0234 180.31 39.6447 182.948 39.6664ZM177.422 82.6123L177.759 49.7298L197.267 49.9252L197.191 56.9707L185.206 56.8513L185.151 62.6266L195.725 62.746L195.638 69.7806L185.075 69.6829L185.01 75.6537L197.462 75.7839L197.397 82.8294L177.422 82.6123ZM218.542 61.1415L216.479 68.3607C217.565 68.8275 218.661 69.2291 219.704 69.5223C221.994 70.1953 224.263 69.62 225.066 66.8626C225.75 64.4308 224.654 62.8025 221.734 61.9557C221.592 61.9231 220.539 61.6626 218.542 61.1415ZM211.421 85.9472L204.212 83.8737L213.266 52.3048C213.798 52.4568 215.339 52.891 217.836 53.5641C220.377 54.248 222.092 54.7365 222.939 54.9754C227.411 56.2564 230.375 58.1887 231.84 60.7507C233.306 63.2693 233.577 66.0918 232.709 69.0989C231.884 72.0408 230.071 74.2663 227.357 75.7318C224.643 77.1539 221.506 77.3711 217.988 76.3615C216.403 75.9055 215.242 75.5256 214.504 75.2107L211.421 85.9472ZM255.149 104.056C253.705 104.479 251.936 104.458 249.884 103.98C247.843 103.524 245.922 102.677 244.065 101.483C239.755 98.7257 237.107 95.1867 236.075 90.8552C235.087 86.4694 235.945 82.1704 238.702 77.8498C241.362 73.692 244.847 71.054 249.092 69.9793C253.358 68.9154 257.776 69.849 262.368 72.791C265.896 75.049 268.339 78.2732 269.001 81.1066L263.139 84.0485C262.021 81.7145 260.468 79.945 258.569 78.7291C256.311 77.2853 253.977 76.8402 251.567 77.3721C249.168 77.8932 247.137 79.5108 245.433 82.1596C243.87 84.613 243.37 87.1316 243.902 89.7153C244.456 92.2447 245.965 94.329 248.462 95.9249C250.676 97.347 253.13 97.9658 255.779 97.7595L255.149 104.056ZM273.68 90.5979L278.989 85.9407L296.977 106.458L291.679 111.116L285.166 103.69L265.712 120.745L260.751 115.089L280.205 98.0342L273.68 90.5979ZM285.978 134.356C284.957 136.809 285.022 139.252 286.097 141.662C287.313 144.408 289.126 146.167 291.46 146.927C293.848 147.665 296.378 147.459 299.026 146.276C301.74 145.081 303.564 143.29 304.487 140.88C305.421 138.459 305.366 136.017 304.281 133.563C303.152 131.045 301.382 129.362 298.983 128.483C296.595 127.593 294.033 127.755 291.33 128.95C288.768 130.089 286.998 131.902 285.978 134.356ZM301.132 121.166C305.399 122.805 308.612 125.997 310.707 130.719C312.792 135.387 313.074 139.838 311.543 144.05C310.056 148.316 306.962 151.497 302.272 153.582C297.778 155.579 293.371 155.731 289.104 153.972C284.849 152.268 281.69 149.109 279.66 144.517C277.586 139.838 277.304 135.387 278.791 131.132C280.322 126.909 283.416 123.728 288.095 121.654C292.513 119.689 296.855 119.516 301.132 121.166ZM313.998 170.719L308.06 171.316L308.309 173.791C308.537 176.092 309.721 177.156 311.848 176.939C313.716 176.755 314.627 175.05 314.421 173.042C314.378 172.618 314.247 171.826 313.998 170.719ZM301.514 171.967L295.38 172.575C295.261 173.302 295.261 174.16 295.358 175.137C295.64 178.036 296.965 179.371 299.255 179.132C301.21 178.947 302.067 177.536 301.807 174.876L301.514 171.967ZM320.175 162.555C320.728 166.17 321.152 169.481 321.456 172.434C322.194 179.87 319.263 183.746 314.41 184.234C311.175 184.549 308.624 183.539 306.735 181.227L306.638 181.238C305.932 183.995 303.554 186.275 299.625 186.666C296.314 186.992 293.719 186.08 291.743 183.952C289.8 181.835 288.649 178.926 288.28 175.235C287.846 170.882 287.618 167.733 287.618 165.801L320.175 162.555Z"
                fill="white"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M185.217 267.834C230.562 267.834 267.548 230.848 267.548 185.503C267.548 140.158 230.562 103.172 185.217 103.172C139.872 103.172 102.885 140.158 102.885 185.503C102.885 230.848 139.872 267.834 185.217 267.834Z"
                fill="white"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M185.217 257.021C224.613 257.021 256.735 224.898 256.735 185.502C256.735 146.117 224.613 113.984 185.217 113.984C145.821 113.984 113.698 146.117 113.698 185.502C113.698 224.898 145.821 257.021 185.217 257.021Z"
                fill="#119EDA"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M185.217 262.592C227.674 262.592 262.304 227.962 262.304 185.504C262.304 143.047 227.674 108.417 185.217 108.417C142.759 108.417 108.129 143.047 108.129 185.504C108.129 227.962 142.759 262.592 185.217 262.592Z"
                fill="#273572"
              />
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M185.217 252.177C221.942 252.177 251.894 222.225 251.894 185.5C251.894 148.775 221.942 118.823 185.217 118.823C148.491 118.823 118.54 148.775 118.54 185.5C118.54 222.225 148.491 252.177 185.217 252.177Z"
                fill="#119EDA"
              />
            </g>
            <mask
              id="mask1_59_434"
              // style="mask-type:luminance"
              maskUnits="userSpaceOnUse"
              x="113"
              y="113"
              width="144"
              height="145"
            >
              <path
                d="M113.694 185.505C113.694 224.89 145.816 257.024 185.212 257.024C224.608 257.024 256.731 224.89 256.731 185.505C256.731 146.109 224.608 113.987 185.212 113.987C145.816 113.987 113.694 146.109 113.694 185.505Z"
                fill="white"
              />
            </mask>
            <g mask="url(#mask1_59_434)">
              <path
                d="M171.551 227.637L132.991 188.92L150.026 172.005L170.936 193.009L171.641 193.717L172.349 193.013L214.569 151.092L231.605 168.008L171.551 227.637Z"
                fill="#51AD32"
                stroke="white"
                strokeWidth="2"
              />
            </g>
            <mask
              id="mask2_59_434"
              // style="mask-type:luminance"
              maskUnits="userSpaceOnUse"
              x="0"
              y="0"
              width="371"
              height="371"
            >
              <path d="M0 0H371V371H0V0Z" fill="white" />
            </mask>
            <g mask="url(#mask2_59_434)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M72.9441 221.343L70.4038 229.224L62.1207 229.203L68.8297 234.055L66.2568 241.926L72.9441 237.051L79.6313 241.926L77.0584 234.055L83.7674 229.203L75.4843 229.224L72.9441 221.343ZM297.096 221.343L294.556 229.224L286.273 229.203L292.982 234.055L290.409 241.926L297.096 237.051L303.784 241.926L301.211 234.055L307.92 229.203L299.637 229.224L297.096 221.343Z"
                fill="white"
              />
              <mask
                id="mask3_59_434"
                //   style="mask-type:alpha"
                maskUnits="userSpaceOnUse"
                x="174"
                y="299"
                width="24"
                height="21"
              >
                <rect
                  x="174.237"
                  y="299.628"
                  width="22.7974"
                  height="20.3548"
                  fill="#D9D9D9"
                />
              </mask>
              <g mask="url(#mask3_59_434)">
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M185.302 299.628L182.762 307.509L174.479 307.488L181.188 312.34L178.615 320.211L185.302 315.336L191.99 320.211L189.417 312.34L196.126 307.488L187.843 307.509L185.302 299.628ZM409.455 299.628L406.915 307.509L398.632 307.488L405.34 312.34L402.768 320.211L409.455 315.336L416.142 320.211L413.569 312.34L420.278 307.488L411.995 307.509L409.455 299.628Z"
                  fill="white"
                />
              </g>
              <mask
                id="mask4_59_434"
                //   style="mask-type:alpha"
                maskUnits="userSpaceOnUse"
                x="107"
                y="272"
                width="24"
                height="22"
              >
                <rect
                  x="107.473"
                  y="272.76"
                  width="22.7974"
                  height="20.3548"
                  fill="#D9D9D9"
                />
              </mask>
              <g mask="url(#mask4_59_434)">
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M118.539 272.76L115.998 280.641L107.715 280.619L114.424 285.472L111.852 293.342L118.539 288.468L125.226 293.342L122.653 285.472L129.362 280.619L121.079 280.641L118.539 272.76ZM342.691 272.76L340.151 280.641L331.868 280.619L338.577 285.472L336.004 293.342L342.691 288.468L349.378 293.342L346.806 285.472L353.515 280.619L345.231 280.641L342.691 272.76Z"
                  fill="white"
                />
              </g>
              <mask
                id="mask5_59_434"
                //   style="mask-type:alpha"
                maskUnits="userSpaceOnUse"
                x="251"
                y="272"
                width="24"
                height="22"
              >
                <rect
                  x="251.585"
                  y="272.76"
                  width="22.7974"
                  height="20.3548"
                  fill="#D9D9D9"
                />
              </mask>
              <g mask="url(#mask5_59_434)">
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M262.651 272.76L260.11 280.641L251.827 280.619L258.536 285.472L255.963 293.342L262.651 288.468L269.338 293.342L266.765 285.472L273.474 280.619L265.191 280.641L262.651 272.76ZM486.803 272.76L484.263 280.641L475.98 280.619L482.689 285.472L480.116 293.342L486.803 288.468L493.49 293.342L490.918 285.472L497.626 280.619L489.343 280.641L486.803 272.76Z"
                  fill="white"
                />
              </g>
            </g>
          </svg>
        </div>
        <ClickerNavbar></ClickerNavbar>
      </div>
    </div>
  );
}

export default Clicker;
